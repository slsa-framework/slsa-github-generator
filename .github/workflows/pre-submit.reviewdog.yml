name: reviewdog

"on": [pull_request]

# TODO(github.com/slsa-framework/slsa-github-generator/issues/228): use more restrictive default
permissions: read-all

jobs:
  golangci-lint:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: golangci-lint
        uses: reviewdog/action-golangci-lint@v2
        with:
          go_version: "1.18"
          golangci_lint_flags: "--timeout=5m"
          level: warning
          fail_on_error: true
  shellcheck:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: shellcheck
        uses: reviewdog/action-shellcheck@v1
        with:
          level: warning
          fail_on_error: true
  shfmt:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: shfmt
        uses: reviewdog/action-shfmt@v1
        with:
          level: warning
          fail_on_error: true
  yamllint:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: yamllint
        uses: reviewdog/action-yamllint@v1
        with:
          yamllint_flags: "-c .yamllint.yaml ."
          level: warning
          fail_on_error: true
